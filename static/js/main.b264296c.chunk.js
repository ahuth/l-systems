(this["webpackJsonpl-systems"]=this["webpackJsonpl-systems"]||[]).push([[0],{10:function(t,e,n){"use strict";n.r(e);var s=n(0),i=n(1),o=n.n(i),r=n(3),a=n.n(r);class c{constructor(t,e){this.x=void 0,this.y=void 0,this.x=t,this.y=e}add(t){return new c(this.x+t.x,this.y+t.y)}subtract(t){return new c(this.x-t.x,this.y-t.y)}}function h(t,e){return new c(t.x+e.canvas.width/2,-t.y+e.canvas.height/2)}class u{static fromDegrees(t){return new u(t*Math.PI/180)}constructor(t){this.radians=void 0,this.radians=t}get degrees(){return 180*this.radians/Math.PI}subtract(t){return new u(this.radians-t.radians)}add(t){return new u(this.radians+t.radians)}}let l;!function(t){t[t.DrawLeaf=0]="DrawLeaf",t[t.DrawLine=1]="DrawLine",t[t.Noop=2]="Noop",t[t.PopAngle=3]="PopAngle",t[t.PopPosition=4]="PopPosition",t[t.PushAngle=5]="PushAngle",t[t.PushPosition=6]="PushPosition",t[t.TurnLeft=7]="TurnLeft",t[t.TurnRight=8]="TurnRight"}(l||(l={}));const g={1:"11",0:"1[0]0"};function d(t){switch(t){case"0":return[l.DrawLeaf];case"1":return[l.DrawLine];case"[":return[l.PushPosition,l.PushAngle,l.TurnLeft];case"]":return[l.PopPosition,l.PopAngle,l.TurnRight];default:return[l.Noop]}}class p{constructor(t,e){this.from=void 0,this.to=void 0,this.from=t,this.to=e}}class b{constructor(t,e){this.angle=void 0,this.position=void 0,this.angle=t,this.position=e}gotoAngle(t){return this.angle=t,this.position}gotoPosition(t){return this.position=t,t}turnRight(t){return this.angle=this.angle.subtract(t),this.position}turnLeft(t){return this.angle=this.angle.add(t),this.position}moveForward(t){const e=new c(Math.cos(this.angle.radians)*t,Math.sin(this.angle.radians)*t);return this.position=this.position.add(e),this.position}}function j(){const[t,e]=Object(i.useState)(45),[n,o]=Object(i.useState)(7),[r,a]=Object(i.useState)(2),j=Object(i.useRef)(null);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("header",{children:[Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"angle",children:"Angle"}),Object(s.jsx)("input",{id:"angle",type:"range",min:"10",max:"60",value:t,onChange:t=>e(Number(t.target.value))}),Object(s.jsx)("span",{children:t})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"iterations",children:"Iterations"}),Object(s.jsx)("input",{id:"iterations",type:"range",min:"1",max:"20",value:n,onChange:t=>o(Number(t.target.value))}),Object(s.jsx)("span",{children:n})]}),Object(s.jsxs)("div",{children:[Object(s.jsx)("label",{htmlFor:"length",children:"Length"}),Object(s.jsx)("input",{id:"length",type:"range",min:"0.1",max:"20",step:"0.1",value:r,onChange:t=>a(Number(t.target.value))}),Object(s.jsx)("span",{children:r})]}),Object(s.jsx)("button",{onClick:function(){if(j.current){const e=function(t,e){const n=[],s=new b(e.startAngle,e.startPosition),i=[],o=[];let r=e.startPosition;for(let a of t)switch(a){case l.DrawLeaf:{const t=s.angle,i=e.segmentLength/2;s.turnLeft(e.turnAngle);const o=s.moveForward(i);n.push(new p(r,o)),s.gotoAngle(t),s.gotoPosition(r);const a=s.moveForward(i);n.push(new p(r,a)),s.gotoAngle(t),s.gotoPosition(r),s.turnRight(e.turnAngle);const c=s.moveForward(i);n.push(new p(r,c)),s.gotoAngle(t),s.gotoPosition(r);break}case l.DrawLine:{const t=s.moveForward(e.segmentLength),i=new p(r,t);n.push(i),r=t;break}case l.PopAngle:{const t=i.pop();t&&s.gotoAngle(t);break}case l.PopPosition:{const t=o.pop();t&&(r=t,s.gotoPosition(t));break}case l.PushAngle:i.push(s.angle);break;case l.PushPosition:o.push(s.position);break;case l.TurnLeft:s.turnLeft(e.turnAngle);break;case l.TurnRight:s.turnRight(e.turnAngle)}return n}(function(t){const e=function(t,e){let n=t.next().value;for(let s=1;s<=e;s++)n=t.next().value;return n}(function*(t,e){let n="0";for(;;){const t=n.split("").map((t=>e[t]||t)).join("");yield t,n=t}}(0,g),t);return console.log("fractal tree symbols:",e),e.split("").flatMap(d)}(n),{segmentLength:r,startAngle:u.fromDegrees(90),startPosition:new c(0,-300),turnAngle:u.fromDegrees(t)}),s=j.current.getContext("2d");!function(t){t.clearRect(0,0,t.canvas.width,t.canvas.height)}(s),function(t,e){t.reduce(((t,n)=>t.then((()=>new Promise((t=>{!function(t,e){const n=h(t.from,e),s=h(t.to,e);e.lineWidth=1,e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(s.x,s.y),e.stroke()}(n,e),setTimeout((()=>{t()}),1)}))))),Promise.resolve())}(e,s)}},children:"Draw"})]}),Object(s.jsx)("main",{children:Object(s.jsx)("canvas",{ref:j,height:"600",width:"600"})})]})}n(9);a.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(j,{})}),document.getElementById("root"))},9:function(t,e,n){}},[[10,1,2]]]);
//# sourceMappingURL=main.b264296c.chunk.js.map